---

export interface Props {
  projects: {
    name: string,
    description: string,
    images: {
      src: string,
      alt: string,
      extraStyles?: string
    }[]
  }[]
}

const { projects } = Astro.props;
---

<div class='relative w-full h-full rounded-2xl md:rounded-[2.8rem]'>
  {projects.map(project => (
    <div class='w-full h-full bg-transparent border-2 border-black md:border-0 md:bg-black mySlides fade rounded-2xl md:rounded-[2.8rem]'>
      <div id='scroll-alert' class='absolute flex-col items-center hidden text-2xl text-black md:flex -right-16 -top-20 animate-bounce'>
        <small class='text-lg font-helveticaNowText'>Role a imagem para ver detalhes</small>
        <button class="rotate-90">&#x2794;</button>
      </div>
      <section id='scroll-projects' class='grid w-full h-full overflow-x-hidden overflow-y-scroll rounded-2xl md:rounded-[2.8rem] pb-9 place-items-center scrollbar-none'>
        {project.images.map(image => (
          <img class={'select-none rounded h-full ' + image.extraStyles} src={image.src} alt={image.alt}>
        ))}
      </section>
      <div class='hidden absolute w-[80%] h-48 sm:flex flex-col justify-center rounded-xl -bottom-10 -right-2 xl:-right-10 bg-[#e2e0d6] p-4 border-b-2 border-r-2 border-dashed border-black'>
        <span class="font-matterSemiBold text-[1rem] sm:text-2xl text-black">{project.name}</span>
        <p class="text-[1rem] md:text-lg font-helveticaNowText">{project.description}</p>
      </div>
      <div class="absolute flex flex-col -bottom-14 bg-[#e2e0d6] mx-2 p-2 rounded-xl sm:hidden">
        <h3 class="text-xl font-matterSemiBold"><span class="mr-2 text-brand">|</span>{project.name}</h3>
        <span class="text-[0.85rem] lg:text-xl font-helveticaNowText">{project.description}</span>
      </div>
    </div>
  ))}

  <div class='w-full h-full bg-secondaryBrand mySlides rounded-2xl md:rounded-[2.8rem]'>
    <span class='absolute text-xl text-black top-1/2 left-20 md:left-10 font-matterSemiBold'>Em breve mais...</span>
  </div>

  <div class='text-4xl font-bold text-white select-none xl:text-black'>
    <button id='prev' class='hover:border-2 hover:border-black bg-black xl:bg-transparent rounded-xl w-min absolute top-1/2 xl:-left-20 cursor-pointer mt-[-22px] p-4 transition duration-500 ease-in'>&#10094;</button>
    <button id='next' class='hover:border-2 hover:border-black bg-black xl:bg-transparent rounded-xl w-min absolute top-1/2 right-0 xl:-right-20 cursor-pointer mt-[-22px] p-4 transition duration-500 ease-in'>&#10095;</button>
  </div>
</div>

<script>
  (document.getElementById('prev') as HTMLButtonElement).addEventListener('click', () => plusSlides(-1));
  (document.getElementById('next') as HTMLButtonElement).addEventListener('click', () => plusSlides(1));

  let slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n: number) {
    showSlides(slideIndex += n);
  }

  function showSlides(n: number) {
    let i;
    let slides = document.getElementsByClassName('mySlides');
    if (n > slides.length) {slideIndex = 1}
    if (n < 1) {slideIndex = slides.length}
    for (i = 0; i < slides.length; i++) {
      (slides[i] as HTMLElement).style.display = 'none';
    }
    (slides[slideIndex-1] as HTMLElement).style.display = 'block';
  }
</script>